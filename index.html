<!DOCTYPE html>
<html lang=fr>
  <head>
    <title>Irish Vocabulary</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Apprendre l'irlandais n'a jamais été aussi facile grâce à notre puissant moteur d'apprentissage !">
    <link rel="shortcut icon" href="https://cdn.pixabay.com/photo/2019/11/01/14/42/ireland-4594424_640.jpg">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  </head>
  <body class="w3-center">
    <div style="width:100%;" class="w3-xlarge w3-blue w3-center">
      <p style="width:100%;">Irish Vocabulary</p>
      <img style="width:100%;" class="w3-image" src="https://cdn.pixabay.com/photo/2019/11/01/14/42/ireland-4594424_640.jpg" alt="Drapeau irlandais"></img>
    </div>
    <div class="w3-container">
    <h2 class="w3-center w3-blue">Vocabulaire par thèmes</h2>

    <!-- Selecteur de thèmes -->
    <div class="w3-margin">
      <label for="themeSelect" class="w3-text-blue">Choisissez un thème :</label>
      <select id="themeSelect" class="w3-select w3-border" onchange="afficherTableau()">
        <!-- Options générées par le script -->
      </select>
    </div>

    <!-- Table -->
    <table id="vocabTable" style="width:100%;" class="w3-table-all w3-hoverable w3-margin-top w3-striped">
      <thead>
        <tr class="w3-blue">
          <th>Mot en Irlandais</th>
          <th>Traduction (Français)</th>
          <th>Traduction (Anglais)</th>
          <th>Écouter</th>
        </tr>
      </thead>
      <tbody>
        <!-- Contenu généré par le script -->
      </tbody>
    </table>
  </div>
    <script>
      let vocabulaireIrlandais = [];
// Remplacez '14pLUY0i1RikionR1YVdivygeJ1OyApRvVjYr7Qmh_8Q' par l'ID de votre feuille de calcul
const spreadsheetId = '14pLUY0i1RikionR1YVdivygeJ1OyApRvVjYr7Qmh_8Q';
// Remplacez 'Feuille1' par le nom de votre feuille
const sheetName = 'Vocabulary';

// URL de l'API Google Sheets
const url = `https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetId}/values/${sheetName}?key=AIzaSyAnXeNFcsaDIEW4tVTValvOiW5KySE8F9Q`;

// Fonction pour récupérer les données
fetch(url)
  .then(response => {
    if (!response.ok) {
      throw new Error(`Erreur HTTP : ${response.status}`);
    }
    return response.json();
  })
  .then(data => {
    if (data.values) {
      // Initialisation du tableau vocabulaireIrlandais
    vocabulaireIrlandais = data.values.map(row => ({
        motIrlandais: row[0],
        traductionFrancais: row[1],
        traductionAnglais: row[2],
        theme: row[3],
        indicePrononciation: row[4]
      }));
      console.log(vocabulaireIrlandais);
    } else {
      console.log('Aucune donnée trouvée.');
    }
  })
  .catch(error => {
    console.error('Erreur lors de la récupération des données :', error.message);
  });
      
console.log(vocabulaireIrlandais);
    </script>
    <script>
      function verifierVoixIrlandaise() {
      const voices = window.speechSynthesis.getVoices();
        console.log(voices);
      irishVoice = voices.find(voice => voice.lang.startsWith("ga"));
      if (!irishVoice) {
        alert("Voix en irlandais non disponible. Veuillez vérifier si elle peut être installée dans les paramètres de synthèse vocale de votre système.");
      }
    }

    // Initialisation des voix
    if ('speechSynthesis' in window) {
      window.speechSynthesis.onvoiceschanged = verifierVoixIrlandaise;
    } else {
      alert("Synthèse vocale non prise en charge par ce navigateur.");
    }
          // Générer les options du sélecteur de thèmes
    const themes = [...new Set(vocabulaireIrlandais.map(item => item.theme))];
    const themeSelect = document.getElementById("themeSelect");

    themes.forEach(theme => {
      const option = document.createElement("option");
      option.value = theme;
      option.textContent = theme;
      themeSelect.appendChild(option);
    });

    // Fonction pour afficher le tableau
    function afficherTableau() {
      const selectedTheme = themeSelect.value;
      const filteredWords = vocabulaireIrlandais.filter(item => item.theme === selectedTheme);
      const vocabTableBody = document.querySelector("#vocabTable tbody");

      // Effacer le contenu précédent
      vocabTableBody.innerHTML = "";

      // Ajouter les lignes correspondant au thème sélectionné
      filteredWords.forEach(word => {
        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${word.motIrlandais}</td>
          <td>${word.traductionFrancais}</td>
          <td>${word.traductionAnglais}</td>
          <td><button class="w3-button w3-blue" onclick="lireMot('${word.motIrlandais}')">Écouter</button></td>
        `;
        vocabTableBody.appendChild(row);
      });
    }

    // Initialiser avec le premier thème
    afficherTableau();

       function lireMot(texte) {
      if (irishVoice) {
        const utterance = new SpeechSynthesisUtterance(texte);
        utterance.voice = irishVoice;
        utterance.lang = "ga-IE";
        window.speechSynthesis.speak(utterance);
      } else {
        alert("La voix en irlandais n'est pas disponible.");
      }
    }
  </script>
    
  </body>
</html>
