<!DOCTYPE html>
<html lang="fr">
  <head>
    <title>Irish Vocabulary</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Apprendre l'irlandais n'a jamais été aussi facile grâce à notre puissant moteur d'apprentissage !">
    <link rel="shortcut icon" href="https://cdn.pixabay.com/photo/2019/11/01/14/42/ireland-4594424_640.jpg">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  </head>
  <body class="w3-center">
    <div style="width:100%;" class="w3-xlarge w3-blue w3-center">
      <p style="width:100%;">Irish Vocabulary</p>
      <img style="width:100%;" class="w3-image" src="https://cdn.pixabay.com/photo/2019/11/01/14/42/ireland-4594424_640.jpg" alt="Drapeau irlandais"></img>
    </div>
    <div class="w3-container">
      <h2 class="w3-center w3-blue">Vocabulaire par thèmes</h2>

      <!-- Selecteur de thèmes -->
      <div class="w3-margin">
        <label for="themeSelect" class="w3-text-blue">Choisissez un thème :</label>
        <select id="themeSelect" class="w3-select w3-border" onchange="afficherTableau()">
          <!-- Options générées par le script -->
        </select>
      </div>

      <!-- Table -->
      <table id="vocabTable" style="width:100%;" class="w3-table-all w3-hoverable w3-margin-top w3-striped">
        <thead>
          <tr class="w3-blue">
            <th>Mot en Irlandais</th>
            <th>Phonétique</th>
            <th>Traduction</th>
            <th>Écouter</th>
          </tr>
        </thead>
        <tbody>
          <!-- Contenu généré par le script -->
        </tbody>
      </table>
    </div>

    <script>
      let vocabulaireIrlandais = [];
      const spreadsheetId = '14pLUY0i1RikionR1YVdivygeJ1OyApRvVjYr7Qmh_8Q'; // ID de votre feuille de calcul
      const sheetName = 'Vocabulary'; // Nom de la feuille dans Google Sheets

      // URL de l'API Google Sheets
      const url = `https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetId}/values/${sheetName}?key=AIzaSyAnXeNFcsaDIEW4tVTValvOiW5KySE8F9Q`;

      // Fonction pour récupérer les données de Google Sheets
      fetch(url)
        .then(response => {
          if (!response.ok) {
            throw new Error(`Erreur HTTP : ${response.status}`);
          }
          return response.json();
        })
        .then(data => {
          if (data.values) {
            // Initialisation du tableau vocabulaireIrlandais
            vocabulaireIrlandais = data.values.map(row => ({
              motIrlandais: row[0],
              traductionFrancais: row[1],
              traductionAnglais: row[2],
              theme: row[3],
              indicePrononciation: row[4]
            }));
            console.log(vocabulaireIrlandais);

            // Remplir le sélecteur de thèmes après la récupération des données
            const themes = [...new Set(vocabulaireIrlandais.map(item => item.theme))];
            const themeSelect = document.getElementById("themeSelect");

            themes.forEach(theme => {
              const option = document.createElement("option");
              option.value = theme;
              option.textContent = theme;
              themeSelect.appendChild(option);
            });

            // Initialiser avec le premier thème
            afficherTableau();
          } else {
            console.log('Aucune donnée trouvée.');
          }
        })
        .catch(error => {
          console.error('Erreur lors de la récupération des données :', error.message);
        });

      // Fonction pour afficher le tableau en fonction du thème sélectionné
      function afficherTableau() {
        const selectedTheme = document.getElementById("themeSelect").value;
        const filteredWords = vocabulaireIrlandais.filter(item => item.theme === selectedTheme);
        const vocabTableBody = document.querySelector("#vocabTable tbody");

        // Effacer le contenu précédent
        vocabTableBody.innerHTML = "";

        // Ajouter les lignes correspondant au thème sélectionné
        filteredWords.forEach(word => {
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${word.motIrlandais}</td>
            <td>${word.traductionFrancais}</td>
            <td>${word.traductionAnglais}</td>
            <td><button class="w3-button w3-blue" onclick="lireMot('${word.motIrlandais}')">Écouter</button></td>
          `;
          vocabTableBody.appendChild(row);
        });
      }

      // Fonction pour lire un mot en irlandais
      let irishVoice = null;

      function verifierVoixIrlandaise() {
        const voices = window.speechSynthesis.getVoices();
        irishVoice = voices.find(voice => voice.lang.startsWith("ga"));
        if (!irishVoice) {
          alert("Voix en irlandais non disponible. Veuillez vérifier si elle peut être installée dans les paramètres de synthèse vocale de votre système.");
        }
      }

      // Initialisation des voix
      if ('speechSynthesis' in window) {
        window.speechSynthesis.onvoiceschanged = verifierVoixIrlandaise;
      } else {
        alert("Synthèse vocale non prise en charge par ce navigateur.");
      }

      // Fonction pour lire un mot en irlandais
      function lireMot(texte) {
        if (irishVoice) {
          const utterance = new SpeechSynthesisUtterance(texte);
          utterance.voice = irishVoice;
          utterance.lang = "ga-IE";
          window.speechSynthesis.speak(utterance);
        } else {
          alert("La voix en irlandais n'est pas disponible.");
        }
      }
    </script>
      <div style="width:100%;" class="w3-xlarge w3-blue w3-center">
      <p style="width:100%;">Prononciation</p>
    </div>
     <table class="w3-table-all w3-hoverable w3-bordered w3-card-4 w3-margin-top">
      <thead>
        <tr class="w3-blue">
          <th>Lettre / Groupe de lettres</th>
          <th>Prononciation en IPA</th>
          <th>Exemple</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>ai</td>
          <td>aː</td>
          <td>"a" dans "ball" (ex: "báid" = bateau)</td>
        </tr>
        <tr>
          <td>ea</td>
          <td>ɛː</td>
          <td>comme "air" en anglais (ex: "fear" = homme)</td>
        </tr>
        <tr>
          <td>ei</td>
          <td>ɛː</td>
          <td>comme "e" dans "bed" (ex: "ceist" = question)</td>
        </tr>
        <tr>
          <td>eu</td>
          <td>øː</td>
          <td>comme "eu" dans "peur" en français (ex: "ceist" = question)</td>
        </tr>
        <tr>
          <td>oi</td>
          <td>ɔɪ</td>
          <td>comme "oy" en anglais (ex: "toit" = toit)</td>
        </tr>
        <tr>
          <td>oi</td>
          <td>ʌɪ</td>
          <td>comme "boy" en anglais (ex: "boil" = ébullition)</td>
        </tr>
        <tr>
          <td>ou</td>
          <td>ʊː</td>
          <td>comme "oo" dans "pool" (ex: "bous" = sucré)</td>
        </tr>
        <tr>
          <td>sh</td>
          <td>ʃ</td>
          <td>comme "sh" en anglais (ex: "sí" = oui)</td>
        </tr>
        <tr>
          <td>th</td>
          <td>t̪ˠ</td>
          <td>comme un "t" doux (ex: "thé" en français)</td>
        </tr>
        <tr>
          <td>ch</td>
          <td>x</td>
          <td>comme le "ch" en allemand dans "Bach" (ex: "loch" = lac)</td>
        </tr>
        <tr>
          <td>dh</td>
          <td>ʝ</td>
          <td>comme "y" dans "yes" (ex: "dheal" = opinion)</td>
        </tr>
        <tr>
          <td>gh</td>
          <td>ɣ</td>
          <td>son guttural (ex: "ghorm" = bleu)</td>
        </tr>
        <tr>
          <td>r</td>
          <td>ɾˠ</td>
          <td>roulé (ex: "rón" = phoque)</td>
        </tr>
        <tr>
          <td>s</td>
          <td>s</td>
          <td>comme "s" en anglais (ex: "siúil" = marcher)</td>
        </tr>
      </tbody>
    </table>
  </body>
</html>
